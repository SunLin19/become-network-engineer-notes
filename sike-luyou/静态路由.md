# 静态路由

**路由（routing）就是通过互联的网络把信息从源地址传输到目的地址的活动**，静态路由是固定的，不会改变，即使网络状况已经改变或是重新被组态，由于不自动更新的原因，也不占用网络带宽。一般来说，静态路由是由网络管理员逐项加入路由表。这也让人们难以全面地了解整个网络的拓扑结构，不过相对来说也提高安全保密性。

但缺点也很明显，当网络的拓扑结构和链路状态发生变化时，路由器中的静态路由信息需要大范围地调整，这一工作的难度和复杂程度非常高。当网络发生变化或网络发生故障时，不能重选路由，很可能使路由失败。

> 参考 [百度百科-静态路由](https://baike.baidu.com/item/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1)

## 简单静态路由拓扑

* lo0表示loopback 0接口，该环回地址用于模拟PC的IP地址进行测试
* Fa代表以太网接口（fastethernet），0/1以太网接口的位置；s0/0/1串口（serial）也是同理
* 通告静态路由，路由器也需要指明下一跳的路由地址

如下网络拓扑的意思是：让不同网段、不同路由的地址设备进行互通连接访问

![](https://i.postimg.cc/nhR4HD3F/2019-10-15-100252.png)

btw：早期的路由器对接需要通过Serial端口连接来实现,用专门的串口线，如今企业级路由器还保留串口，多用于对终端进行配置，而连接则交给以太网接口处理；究其原因还是串口的传输速率实在太慢了，连接也需要专门的线路。

### 拓扑配置实验

首先设置路由器各自的环回地址

```ios
R1>en
R1#conf t
R1(config)#interface loopback 0
R1(config)#ip add 192.168.1.1 255.255.255.0
```

```ios
R2>en
R2#conf t
R2(config)#interface loopback 0
R2(config)#ip add 192.168.2.1 255.255.255.0
```

设置各自路由器（接口）的IP地址


```ios
R1(config)#int f0/1
R1(config)#ip add 10.0.0.1 255.255.255.0
R1(config)#no shutdown
```

```ios
R2(config)#int f0/1
R2(config)#ip add 10.0.0.2 255.255.255.0
R2(config)#no shutdown
```

公告需要到达的目的IP地址，并指明传达的下一跳路由（路由地址），R1、R2二选一；**若是存在非直连路由，必须指明所有非直连网络的静态路由。**


```ios
R1(config)#ip route 192.168.2.0 255.255.255.0 10.0.0.2
R2(config)#ip route 192.168.1.0 255.255.255.0 10.0.0.1
```

测试连通性

```ios
R1#show ip route //查看配置的路由表
R1#ping 192.168.2.1
```

## 命令配置问题

特权模式`enable`、全局配置模式`conf t`是怎样的联系？

```
switch> //用户模式：这个模式只允许一些基本的监测命令，不能改变设备的配置
switch#> //特权模式：这个模式就可以使用所有的配置命令，但是有个前提：要配置真正所有的命令就必须进入更详细的全局模式
switch(config)#> //全局模式：这个模式类似特权的子集，其又包含如端口设置等其他一系列的详细配置子集
```

为什么每次为端口分配ip后都需要需要no shutdown？

No shutdown是开启端口的意思,路由器启机以后端口默认的状态是shutdown的,所以必须用no shutdown来开启端口

