# OSI模型简略概览


## OSI模型与TCP/IP模型


为使各个厂商的设备能相互进行数据通信以及网络架构的整体统一，于是 **国际标准化组织(ISO)** 定义的 **开放式通信系统互联网模型(OSI)** 就出现了，由 **国际互联网工程任务组(IETF)** 建议的在OSI基础上的TCP/IP协议成为了真正的主流，同时也作为了业界标准。

OSI模型对网络的整体理解也是十分友好，因此理解OSI模型也是学习网络不可或缺的一部分； 会话层与表示层从来没有独立实现过，所以这两层在TCP/IP模型中都是和应用层在一起实现。

> 图片摘自 [钛白Logic](https://www.cnblogs.com/qishui/p/5428938.html)

![](https://i.postimg.cc/tCT1jSpt/2019-08-02-170123.png)


## 各层的作用及目的

* IP地址：IP地址是用于网络传输的地址，IP地址相当于某某所在的职位
* MAC地址: 网卡的硬件地址等同于某某的身份证
* 路由：路由（routing）就是通过互联的网络把信息从源地址传输到目的地址的活动

|OSI模型|行为目的|
|:-:|:-:|
|应用层|为用户提供常用的应用程序，并实现网络服务的各种功能（电子邮件、上网浏览等网络服务）|
|表示层|数据格式的转换，压缩与解压缩，加密与解密|
|会话层|文件传输中出现故障时,会话层应提供断点续传的功能,保证网络修复后, 重传断点以后的数据|
|传输层|传输层则负责将数据可靠地传送到相应的端口（主机程序）|
|网络层|根据网络地址做出路径的选择，网络地址将源结点发出的数据包传送到目的结点|
|数据链路层|通过物理地址负责主机之间数据的可靠传输|
|物理层|建立、维护、断开物理连接（比特流与电子信号之间的切换）|

## 只有MAC地址而没有IP地址，能进行通信吗？

为什么有唯一的MAC地址还需要IP地址?

其实只有MAC地址而没有IP地址，或是只有IP地址但没有MAC地址，都是没法正常准确通信的。

**准确通信的前提**：MAC地址相当于人的身份证号，与人唯一匹配，人的身份证号和拥有人的出生日期等相关，但是跟拥有人所在的位置没有关系，只知道身份证号并不能找到这个人，除非知道这个人所在的城市以及街道和门牌号，MAC地址类似，在出厂后位于哪里被使用并不知道，所以通信的时候除非两台主机位于同一网段内，否则不能通信，有了IP地址将确定了通信对象所在的网段，这样就能准确通信了。

**便于网络维护**：当一个通信的网络主机发生故障时，有IP更容易地为主机位置，否则只有mac地址，就需要将所有的主机检查一遍。

**有利于数据传输**：无论是局域网还是广域网，数据在通信链路上的传播，表现为数据包从一个节点传到另一个节点，有了IP地址，通过路由器的路由表更容易定位主机位置，就像你将一个仅知道身份证号的人在全国这么多人中找出来的难度远大于找出一个即知道身份证又知道街道门牌号的人。这样数据传输更有效。

**更高效的利用网络资源**：二层次地址的寻址比单层次的寻址要更多的节省网络资源，如果在仅有MAC的网络拓扑结构之间通信，那将是极大的网络开销，不值得采用。

| 摘自 [MAC地址唯一，不能满足通信需求吗？为什么需要IP？](https://new.qq.com/omn/20181008/20181008A0LOUY.html)

OSI模型各层的发展史，有时进行各层协议内容学习时，很容易让人陷入思维的误区，比方说：mac地址的确比ip地址早发行，但只通过mac地址进行主机间的通信又行不通，这类似鸡生蛋还是蛋生鸡问题。

## 补充相关术语及名词

在一些情况下，不同的术语是非常有用的，因为用于指特定事物的信息或行为的描述，也是为了业内人士更方便的交流；不幸的是，一些类似的行为在不同的环境中，采用不同的词汇描述，这些术语也能够导致混淆，所以有必要了解及理清各个术语及名词的含义。

关键词：

* 报文（message）：应用层的信息分组（包） 
* 报文段/数据报（segment/datagram）：传输层的分组（包）
* 数据包：就是信息从各层进行的层层封装分组，最后借由数据链路层发送出去的数据单元
* 帧 （frame) ：添加数据链路层协议头的数据包

关于报文段与数据报的区别，以后进行各个层详细说明的时候（传输层章节），再进行解释


## 数据封装的过程

由于信息量过大, 为了保证网络能够将数据传递到目标，将用户数据和必要的地址和管理信息合成为数据包（这个行为称为分组），而包（packet）即是信息在互联网当中传输的单元。

* 一封从应用层发出的邮件资料经过传输层
* 传输层进行数据分组并添加了传输层协议头，发往网络层
* 网络层在此基础上继续封包（添加网络层协议头），下发至数据链路层
* 数据链路层将网络层的包封装成帧（添加数据链路层协议头）
* 在物理层，帧会编码成能够在介质上传输的比特流，并发送至目的地

接收主机以相反的方式进行操作称为解封装。解封装是接收设备移除一层或多层协议头的过程。数据在协议栈中向上移动直到终端应用层伴随着解封装。


> 图片摘自 [dell emc](https://community.emc.com)

![](https://i.postimg.cc/9fcS0TGq/image004.jpg)

<!--
## 经过数据链路的包

![](https://i.postimg.cc/Njv7WDCB/Snipaste-2019-08-05-10-23-44.png)

-->




