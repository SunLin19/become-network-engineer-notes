# 二层交换技术

## 交换机的运作过程

首先交换机根据收到数据帧中的源MAC地址建立该地址同交换机端口的映射，并将其写入MAC地址表中。然后交换机将数据帧中的目的MAC地址同已建立的MAC地址表进行比较，以决定由哪个端口进行转发。若是数据帧中的目的MAC地址不在MAC地址表中，则向所有端口转发这一事件被称为泛洪（flood）。

也可手工添加交换机的MAC地址表的静态记录，手工配置没有老化时间的限制。由于MAC地址表中对于同一个MAC地址只能有一条记录，所以如果手工配置了MAC地址和端口号对应关系后，交换机就不再动态学习这台计算机的MAC地址了。

> 摘抄自 [电子发烧友-交换机的启动过程及运作原理](http://www.elecfans.com/instrument/579650_a.html)

## 冗余

冗余指出于系统安全和可靠性等方面的考虑，人为地对一些关键部件或功能进行重复的配置。当系统发生故障时，比如某一设备发生损坏，冗余配置的部件可以作为备援，及时介入并承担故障部件的工作，由此减少系统的故障时间。冗余可以存在于不同层面，如网络冗余、服务器冗余、磁盘冗余、数据冗余等。

### 冗余环路

回顾一下之前的ARP协议的运作过程：主机A为了获得主机B的mac地址发送arp请求包（也会将自己的mac地址告诉对方），被广播的包将被同一链路所有的主机及路由器接收解析，包中的ip地址若与主机B匹配，那么主机B就将其mac地址塞入响应包以单播的形式返回给发送方主机A。

结合拓扑分析

![](https://i.postimg.cc/B6zwTpNX/Snipaste-2019-10-30-18-43-42.png)

SW即为交换机；SW1在接收到PC A发出的ARP请求帧后，



## 生成树协议

写作思路

交换机的运作流程

造成冗余链路的更深层次的原因

https://baike.baidu.com/item/%E5%86%97%E4%BD%99%E9%93%BE%E8%B7%AF/1080266?fr=aladdin

协议优化了，可硬件（交换机）没有

交换机的运作原理

https://baike.baidu.com/item/%E4%BA%A4%E6%8D%A2%E6%9C%BA/103532#8_1


https://zhidao.baidu.com/question/18369051.html?qbl=relate_question_0&word=%CE%AA%CA%B2%C3%B4%BB%E1%D3%D0%C8%DF%D3%E0%C1%B4%C2%B7

生成树协议
