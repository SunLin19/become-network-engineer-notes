# 网关的意义

## 简单理解网关和路由器 

* 可以这么理解，网关即是两个不同的网络地址设备进行通信的点十进制地址，也就是双方进行信息传递的介质
* 所谓“路由”，是指把数据从一个地方传送到另一个地方的行为和动作，而路由器，正是执行这种行为动作的机器
* 网关定义了边界路由，即ip地址的出口，可以理解成国家之间的交界往返地，`中国 <-> 珠穆朗玛峰 <-> 尼泊尔`

```
:: 路由器的作用简单文符示意图

:: ✗ 否定；<——> 连接；✓ 可行；⊃ 自带完全有；

:: A不能直接访问B
A ——> ✗ ——> B

:: A需要通过C才能与B进行互相通信传递信息，而这个C就是一个代理

A <——> C <——> B ✓

:: A只会汉语、B只会尼泊尔语，而C掌握二者的语言
::（这个语言可以理解成网关，而人也就可以理解成一台路由器），自然可以让双方进行信息传递

C ⊃ gateway

```

## 指定网关的设计

一台电脑的默认网关是不可以随随便便指定的，必须<ins>正确指定</ins>，否则一台电脑就会将数据包发给不是网关的电脑，从而无法与其他网络的电脑通信。

<ins>正确指定的前提：</ins> 根据主机已有IP地址类型的**当前具体的网段**所容纳的可用最大主机数范围，进行的一个IP的设定。

**当前具体的网段：子网掩码与IP的实验、（可能明天下班写做）**


### 例题再现

例题1：PC1:192.168.1.3/26、PC2:192.168.1.70/26，两台PC是否能进行通信？

网络地址
    
公式：`IP地址 && 子网掩码 = 网络地址`

192.168.1.3 && 255.255.255.192 = 192.168.1.0

192.168.1.70 && 255.255.255.0 = 192.168.1.64

192.168.1.0 ≠ 192.168.1.64
  
根据计算PC1与PC2的网络地址不同，由此得出PC1与PC2不能进行通信，以下由 cisco Packet Tracer 进行结论验证支持

![](https://i.postimg.cc/sgq1nDCk/pc-not-Conn-plus.gif)

例题2： 如何让PC1:192.168.1.3/26、PC2:192.168.1.70/26，两台不同网络地址的PC进行通信？

答：配置各自PC的网关，并向路由器添加各自的网关地址，即可使两台PC进行信息传递

1. 当前主机网络最大可用容纳范围主机数

    公式：`2^h-2 = 最大可用主机数`
    
    2*（32-26）-2 = 62 (去掉网络地址 192.168.1.0和广播地址 192.168.1.63)
    
2. 求出当前主机IP的所在子网划分范围

    **当前IP地址的子网划分范围也就是当前网关设置的范围**

    |网络地址|子网掩码|子网划分范围|广播地址
    |:-:|:-:|:-:|:-:
    192.168.1.0|255.255.255.192|1~62 |192.168.1.63
    192.168.1.64|255.255.255.192|65~126 |192.168.1.127
    192.168.1.128|255.255.255.192|129~190|192.168.1.191
    192.168.1.192|255.255.255.192|193~254 |192.168.1.255
    
    由上表可得出公式：
  
    * **子网划分从第二网段开始的<ins>网络地址</ins>=广播地址+1**
    * **子网划分从第二网段开始的可容纳主机范围最小值=广播地址+2**
    * num+(2^h-2)-1 = 子网划分可容纳主机数范围最大值 (num：子网划分可容纳主机范围最小值)
    * 广播地址 = 子网划分可容纳主机数范围最大值+1

最后配置各自PC的网关，并向路由器添加各自的网关地址

## 主机与路由器的网关配置作业

```
Router> enable
Router#conf t
Router(config)#int fa 0/0
Router(config-if)#ip add 192.168.1.60 255.255.255.192
Router(config-if)#no shutdown

Router(config-if)#int fa 0/1
Router(config-if)#ip add 192.168.1.126 255.255.255.192
Router(config-if)#no shutdown
```

![](https://i.postimg.cc/MHTx5Wq3/ping-t.gif)
