# 三层交换机与路由器


## 前置术语名词

IP地址：IP地址是用于网络传输的地址，同时避免了mac地址被过度曝光给对方，

路由：路由（routing）就是通过互联的网络把信息从源地址传输到目的地址的活动

分组：就是为了保证网络能够将数据传递到目标，将用户数据和必要的地址和管理信息合成为数据包的行为。类似于从邮局发送的包裹上注明的地址一样,只有提供给网络这些信息，网络（邮局）才能把分组（包裹）往正确的地址传送。

|层次|OSI的两层模型|层次定义描述|
|:-:|:-:|:-:
|三层|网络层|地址管理与路由选择（进行IP地址寻址，实现不同网络之间的路径选择）|
|二层|数据链路层|互连设备之间的传送和识别数据帧（建立逻辑连接、进行硬件地址寻址、差错校验等功能）|
|一层|物理层|建立、维护、断开物理连接（比特流与电子信号之间的切换）


数据链路层是为网络层提供数据传送服务的。先由网络层进行逻辑地址管理与路由选择，然后数据链路层查找IP地址（主机）所对应的mac地址进行匹配，从而由物理层的网线将数字信号传输到目标主机上（电话线需要调制解调器将模拟信号转为数字信号），让源主机与目地主机进行通信。


设备中所连接的IP主机中的mac地址是否对应，然后进行连接。


## 路由器

建立并维护路由表：为了实现分组转发功能，需要一个路由表，保存路由器每个端口对应的目的网络地址，及默认路由器的地址。路由器通过定期与其他路由器交换路由信息来自动更新路由表

提供网络间的分组转发功能：路由器检查IP分组的目的地址，根据路由表决定该分组的交付方式。若是直接交付，就将分组传送到目的网络。若是间接交付，确定转发端口号与下一跳路由器的IP地址



## 多出来的IP地址该怎样使用（尽量通俗）


想法&写作思路: 之前的二层交换机早于IP地址的设计，ip地址规划完成，现有的二层有不具备这个功能，所以推出了新款的三层交换机、路由器；先写路由器，再写三层交换机。（三层交换机出现缘由）



## 三层交换机

三层交换技术就是：二层交换技术＋三层转发技术。三层交换技术的出现，解决了局域网中网段划分之后，网段中子网必须依赖路由器进行管理的局面，解决了传统路由器低速、复杂所造成的网络瓶颈问题。

而三层交换机的最重要的功能是加快大型局域网络内部的数据的快速转发，加入路由功能也是为这个目的服务的。如果把大型网络按照部门，地域等等因素划分成一个个小局域网，这将导致大量的网际互访，单纯的使用二层交换机不能实现网际互访；如单纯的使用路由器，由于接口数量有限和路由转发速度慢，将限制网络的速度和网络规模，采用具有路由功能的快速转发的三层交换机就成为首选。




## 外观差别

交换机只有LAN口，没有WAN口

![](https://i.postimg.cc/SKwKxB12/Snipaste-2019-07-24-21-18-36.png)

路由器上有一个WAN口，有多个LAN口

![](https://i.postimg.cc/wxPLLWT7/2019-07-30-170044.png)


