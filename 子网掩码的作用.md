# 子网掩码

## 子网掩码的意义

它是一种用来指明一个IP地址的哪些位**标识**的是主机所在的**网络地址**以及哪些位标识的是**主机地址**的位掩码。 一个IP地址的网络部分被称为网络号或者网络地址，子网掩码根据逻辑与运算，得出的结果是相同的网络号，则说明这两台计算机是处于同一个子网络上的，可以进行直接与具有相同的网络号的设备通讯。

> 此部分查阅参考了 [网络掩码 - wiki](https://zh.wikipedia.org/wiki/%E5%AD%90%E7%BD%91#%E7%BD%91%E7%BB%9C%E6%8E%A9%E7%A0%81)、[百度百科-主机地址](https://baike.baidu.com/item/%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80) 


## 子网掩码ABC类IP地址最大网络范围与最大可用主机数

> 摘自 [百度百科 - 子网掩码](https://baike.baidu.com/item/%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81#11)

网掩码一共分为两类。一类是缺省（自动生成）子网掩码，一类是自定义子网掩码。缺省子网掩码即未划分子网，对应的网络号的位都置1，主机号都置0。  
A类网络缺省子网掩码：255.0.0.0  
B类网络缺省子网掩码：255.255.0.0  
C类网络缺省子网掩码：255.255.255.0  

A类IP：1.0.0.1-127.255.255.255
B类IP：128.0.0.1-191.255.255.255
C类IP: 192.0.0.1-223.255.255.255

|IP地址类型|地址表示范围|缺省子网掩码|网络位n与主机位h
|:-:|:-:|:-:|:-:|
|A类地址：|1.0.0.1-127.255.255.255|255.0.0.0|0nnnnnnn.hhhhhhhh.hhhhhhhh.hhhhhhhh
|B类地址：|128.0.0.1-191.255.255.255|255.255.0.0|10nnnnnn.nnnnnnnn.hhhhhhhh.hhhhhhhh
|C类地址：|192.0.0.1-223.255.255.255|255.255.255.0|110nnnnn.nnnnnnnn.nnnnnnnn.hhhhhhhh




## 子网掩码划分的IP网络地址

[网络地址概念](IP地址设计.md#网络地址与广播地址)

例题1：PC1的ip为192.168.0.3/26，PC2的IP为192.168.0.192/26，双方是否能互相通信？（/26即子网掩码有26个连续1）

将IP地址与子网掩码的[二进制](https://zh.wikihow.com/%E4%BB%8E%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%BA%8C%E8%BF%9B%E5%88%B6)进行[&& 逻辑与运算](https://baike.baidu.com/item/%E9%80%BB%E8%BE%91%E4%B8%8E)即可得出网络地址

|子网掩码||
|:-:|:-:|
|/26|1111 1111.1111 1111.1111 1111.1100 0000
|dec|255.255.255.192

PC1

|&&|bin|dec|
|:-:|:-:|:-:|
|IP地址| 1100 0000.1010 1000.0000 0000.0000 0011|192.168.0.3
|子网掩码|1111 1111.1111 1111.1111 1111.1100 0000|255.255.255.192
|结果 网络地址|1100 0000.1010 1000.0000 0000.0000 0000|192.168.0.0

PC2

|&&|bin|dec|
|:-:|:-:|:-:|
|IP地址| 1100 0000.1010 1000.0000 0000.1100 0000|192.168.0.192
|子网掩码|1111 1111.1111 1111.1111 1111.1100 0000|255.255.255.192
|结果 网络地址|1100 0000.1010 1000.0000 0000.1100 0000|192.168.0.192

网络地址 192.168.0.0（PC1） 与 192.168.0.192 (PC2)不同，所以无法连通

## 子网划分的IP广播地址与最大可用主机数

[广播地址概念](IP地址设计.md#网络地址与广播地址)

例题2：PC1的ip为192.168.0.3/26，最大可用主机数与广播地址分别是什么？


||||||
|:-:|:-:|:-:|:-:|:-:|
|/26|1111 1111|1111 1111|1111 1111|1100 0000 

2<sup>6</sup>-2 最多可用主机数：62 （子网掩码未遮罩的6个0为h，[h为主机编号位](IP地址设计.md#ip地址的种类)）

[由例题1得出192.168.0.3/26网络地址为192.168.0.0](子网掩码的作用.md#子网掩码划分的IP网络地址)


公式：`网络地址 || (~子网掩码) = 广播地址`

 将子网掩码[~ 取反](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)

||||||
|:-:|:-:|:-:|:-:|:-:|
|/26|1111 1111|1111 1111|1111 1111|1100 0000 
|~|0000 0000|0000 0000|0000 0000|0011 1111

取反的子网掩码与网络地址进行[|| 短路与运算](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_Operators)

||||
|:-:|:-:|:-:|
|网络地址|1100 0000.1010 1000.0000 0000.0000 0000|192.168.0.0
|(~子网掩码)|0000 0000.0000 0000.0000 0000.0011 1111|0.0.0.63
|广播地址|1100 0000.1010 1000.0000 0000.0011 1111|192.168.0.63

广播地址结果为：192.168.0.63

**快速运算：**

**子网掩码 /26，32-26=6（子网掩码未遮罩的6个0为h，[h为主机编号位](IP地址设计.md#ip地址的种类)），2<sup>6</sup>-2即最大<ins>可用</ins>主机数；也由此可推出广播地址为**  **` x.x.x.最大可用主机数+1`**


## 由例题反证子网掩码的设计

如果子网掩码不是由连续的1和0组成，而是有部分字节存在0101、 0011这种隔断组成的，要么192.168.0.2、192.168.0.3、192.168.0.4之间中的某一个不处于同一网络地址或全都不处于同一网络地址，这不符合常识。

![](https://i.postimg.cc/J4WHR5By/Snipaste-2019-07-14-15-04-15.png)






